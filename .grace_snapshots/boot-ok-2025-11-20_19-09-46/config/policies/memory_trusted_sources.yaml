table: memory_trusted_sources
description: Curated list of allowed external data sources for ingestion with trust scoring and governance tracking.
fields:
  - name: id
    type: uuid
    primary_key: true
    generated: true
    description: Unique identifier for the trusted source

  - name: source_name
    type: string
    required: true
    description: Human-readable name of the source

  - name: source_type
    type: string
    allowed: [website, api, dataset, feed, internal_document, other]
    default: other
    description: Category of the source

  - name: url_pattern
    type: string
    required: true
    description: URL pattern or regex for matching this source

  - name: description
    type: text
    nullable: true
    description: Detailed description of what this source provides

  - name: domains
    type: json
    default: []
    description: List of knowledge domains this source covers (e.g., finance, health, marketing)

  - name: trust_score
    type: float
    default: 0.0
    description: Computed trust score from 0.0 to 1.0 based on quality metrics

  - name: quality_metrics
    type: json
    default: {}
    description: JSON object with metrics like success_rate, freshness, contradiction_count

  - name: last_reviewed_at
    type: datetime
    nullable: true
    description: Timestamp of last manual review

  - name: reviewer
    type: string
    nullable: true
    description: User or agent who last reviewed this source

  - name: ingestion_pipeline_id
    type: string
    nullable: true
    description: Reference to the ingestion pipeline that uses this source

  - name: governance_stamp
    type: json
    nullable: true
    description: Approval metadata including approvers, timestamp, decision reasoning

  - name: status
    type: string
    allowed: [active, pending, rejected, archived]
    default: pending
    description: Approval status of the source

  - name: auto_ingest
    type: boolean
    default: false
    description: Whether to automatically trigger ingestion for this source

  - name: notes
    type: text
    nullable: true
    description: Additional notes or context about the source

  - name: created_at
    type: datetime
    generated: true
    description: When this source was added

  - name: updated_at
    type: datetime
    generated: true
    description: Last update timestamp

indexes:
  - fields: [source_type, status]
  - fields: [trust_score]
  - fields: [domains]

constraints:
  - trust_score_range: "trust_score >= 0.0 AND trust_score <= 1.0"
