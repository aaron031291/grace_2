table: memory_insights
description: |
  Stores summaries, Q&A, and recommendations generated by Grace or humans
  about specific files or domains. Acts as a knowledge overlay for quick recall.
fields:
  - name: id
    type: uuid
    primary_key: true
    generated: true

  - name: file_path
    type: string
    nullable: true
    description: Link to source file (if any)

  - name: context_table
    type: string
    nullable: true
    description: Reference table (documents, datasets, etc.)

  - name: context_row_id
    type: uuid
    nullable: true
    description: ID in the reference table

  - name: insight_type
    type: string
    allowed: [summary, note, question, recommendation, alert, other]
    default: summary

  - name: content
    type: text
    required: true

  - name: generated_by
    type: string
    allowed: [human, grace, other_agent]
    default: grace

  - name: confidence
    type: float
    default: 0.0

  - name: created_at
    type: datetime
    required: true

  - name: tags
    type: json
    default: []

  - name: follow_up_actions
    type: json
    default: []
    description: Array of follow-up action objects
indexes:
  - fields: [file_path]
  - fields: [insight_type]
  - fields: [created_at]
