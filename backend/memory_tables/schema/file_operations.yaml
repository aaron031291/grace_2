table: memory_file_operations
description: Tracks all file operations for undo/redo functionality
fields:
  - name: id
    type: uuid
    primary_key: true
    generated: true
    description: Unique operation identifier

  - name: path
    type: string
    required: true
    description: File path being operated on

  - name: operation
    type: string
    required: true
    description: Type of operation (move, delete, rename, copy)

  - name: source_path
    type: string
    nullable: true
    description: Original file path (for move/rename)

  - name: target_path
    type: string
    nullable: true
    description: Destination file path (for move/rename)

  - name: backup_path
    type: string
    nullable: true
    description: Path to backup for undo

  - name: user
    type: string
    nullable: true
    description: User who performed operation

  - name: can_undo
    type: boolean
    default: true
    description: Whether operation can be undone

  - name: undone
    type: boolean
    default: false
    description: Whether operation has been undone

  - name: undone_at
    type: datetime
    nullable: true
    description: When operation was undone

  - name: created_at
    type: datetime
    required: true
    description: When operation was performed

  - name: metadata_json
    type: json
    default: {}
    description: Full operation details including reasoning

indexes:
  - fields: [path]
  - fields: [operation, created_at]
  - fields: [undone]

version: 1
