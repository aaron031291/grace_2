table: memory_execution_logs
description: |
  Execution history for all self-healing playbook runs.
  Tracks manual and automated executions with full audit trail.
fields:
  - name: id
    type: uuid
    primary_key: true
    generated: true

  - name: playbook_id
    type: uuid
    description: Reference to the playbook that was executed

  - name: playbook_name
    type: string
    required: true

  - name: incident_id
    type: uuid
    description: Related incident if applicable

  - name: triggered_by
    type: string
    enum: ["manual", "automated", "scheduled", "alert"]
    required: true

  - name: triggered_by_user
    type: string
    description: User who triggered manual execution

  - name: triggered_by_agent
    type: string
    description: Agent that triggered automated execution

  - name: status
    type: string
    enum: ["pending", "running", "success", "failed", "cancelled"]
    default: "pending"

  - name: started_at
    type: timestamp
    required: true

  - name: completed_at
    type: timestamp
    description: When execution completed

  - name: duration_ms
    type: integer
    description: Execution duration in milliseconds

  - name: parameters
    type: json
    default: {}
    description: Parameters passed to playbook

  - name: result
    type: text
    description: Execution result or output

  - name: error
    type: text
    description: Error message if execution failed

  - name: logs
    type: text
    description: Detailed execution logs

  - name: affected_components
    type: json
    default: []
    description: Components that were modified

  - name: rollback_available
    type: boolean
    default: false

  - name: rollback_executed
    type: boolean
    default: false

  - name: trust_score
    type: float
    description: Trust score for this execution

  - name: approval_required
    type: boolean
    default: false

  - name: approved_by
    type: string
    description: Who approved the execution

  - name: notes
    type: text
    description: Additional notes or observations

indexes:
  - fields: ["playbook_id", "started_at"]
  - fields: ["status", "started_at"]
  - fields: ["triggered_by", "started_at"]
  - fields: ["incident_id"]

relationships:
  - table: memory_self_healing_playbooks
    type: many_to_one
    foreign_key: playbook_id
    description: The playbook that was executed
  
  - table: memory_incidents
    type: many_to_one
    foreign_key: incident_id
    description: Related incident


