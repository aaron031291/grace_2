# Grace Clarity Framework - Event Routing Configuration
# Declarative event mapping for pub/sub system

events:
  # System lifecycle events
  - event_type: system.boot.started
    description: System boot sequence initiated
    publishers:
      - orchestrator
    subscribers:
      - metrics_collector
      - immutable_log
      - health_monitor
  
  - event_type: system.boot.completed
    description: System boot sequence completed successfully
    publishers:
      - orchestrator
    subscribers:
      - metrics_collector
      - health_monitor
      - notification_service
  
  - event_type: system.boot.failed
    description: System boot sequence failed
    publishers:
      - orchestrator
    subscribers:
      - alert_system
      - immutable_log
  
  # Component lifecycle events
  - event_type: component.activated
    description: A component has been activated
    publishers:
      - any_component
    subscribers:
      - component_manifest
      - metrics_collector
      - health_monitor
  
  - event_type: component.deactivated
    description: A component has been deactivated
    publishers:
      - any_component
    subscribers:
      - component_manifest
      - metrics_collector
  
  - event_type: component.error
    description: A component encountered an error
    publishers:
      - any_component
    subscribers:
      - alert_system
      - self_heal_engine
      - immutable_log
  
  # Cognitive loop events
  - event_type: loop.started
    description: A cognitive loop has started execution
    publishers:
      - reasoning_engine
      - planning_engine
      - execution_engine
    subscribers:
      - metrics_collector
      - immutable_log
  
  - event_type: loop.completed
    description: A cognitive loop completed successfully
    publishers:
      - reasoning_engine
      - planning_engine
      - execution_engine
    subscribers:
      - memory_fusion
      - metrics_collector
      - feedback_pipeline
  
  - event_type: loop.failed
    description: A cognitive loop failed to complete
    publishers:
      - reasoning_engine
      - planning_engine
      - execution_engine
    subscribers:
      - alert_system
      - self_heal_engine
  
  # Memory events
  - event_type: memory.stored
    description: Memory successfully stored
    publishers:
      - memory_fusion
      - lightning_memory
    subscribers:
      - metrics_collector
      - knowledge_graph
  
  - event_type: memory.retrieved
    description: Memory retrieved from storage
    publishers:
      - memory_fusion
      - lightning_memory
    subscribers:
      - metrics_collector
  
  - event_type: memory.trust_updated
    description: Memory trust score updated
    publishers:
      - trust_engine
    subscribers:
      - memory_fusion
      - governance_engine
  
  # Task execution events
  - event_type: task.created
    description: New task created
    publishers:
      - task_orchestrator
      - user_interface
    subscribers:
      - task_executor
      - metrics_collector
  
  - event_type: task.completed
    description: Task completed successfully
    publishers:
      - task_executor
    subscribers:
      - task_orchestrator
      - notification_service
      - metrics_collector
  
  - event_type: task.failed
    description: Task execution failed
    publishers:
      - task_executor
    subscribers:
      - alert_system
      - task_orchestrator
      - self_heal_engine
  
  # Governance events
  - event_type: governance.policy_violation
    description: Policy violation detected
    publishers:
      - constitutional_engine
      - verification_kernel
    subscribers:
      - alert_system
      - immutable_log
      - governance_dashboard
  
  - event_type: governance.approval_required
    description: Action requires governance approval
    publishers:
      - any_component
    subscribers:
      - governance_engine
      - notification_service
  
  # Health & monitoring events
  - event_type: health.degraded
    description: Component health degraded
    publishers:
      - health_monitor
    subscribers:
      - alert_system
      - self_heal_engine
  
  - event_type: health.critical
    description: Critical health issue detected
    publishers:
      - health_monitor
    subscribers:
      - alert_system
      - orchestrator
      - emergency_shutdown
  
  # Learning events
  - event_type: learning.pattern_detected
    description: New pattern detected by learning system
    publishers:
      - learning_engine
    subscribers:
      - memory_fusion
      - metrics_collector
  
  - event_type: learning.model_updated
    description: ML model updated or retrained
    publishers:
      - auto_retrain_engine
    subscribers:
      - model_registry
      - metrics_collector
  
  # Configuration events
  - event_type: config.changed
    description: Configuration updated
    publishers:
      - config_manager
    subscribers:
      - all_components
      - metrics_collector
  
  - event_type: config.validated
    description: Configuration validation completed
    publishers:
      - config_validator
    subscribers:
      - config_manager

# Event routing rules
routing_rules:
  # High priority events bypass normal queue
  priority_events:
    - health.critical
    - system.boot.failed
    - governance.policy_violation
  
  # Events that should be persisted to immutable log
  audit_events:
    - governance.policy_violation
    - governance.approval_required
    - component.error
    - task.failed
    - loop.failed
  
  # Events that trigger alerts
  alert_events:
    - health.critical
    - health.degraded
    - system.boot.failed
    - governance.policy_violation

# Subscriber groups for bulk operations
subscriber_groups:
  monitoring:
    - metrics_collector
    - health_monitor
    - immutable_log
  
  governance:
    - constitutional_engine
    - governance_engine
    - verification_kernel
  
  healing:
    - self_heal_engine
    - alert_system
    - auto_fix_engine
